# Others protocols

## RPC
Remote Procedure Call (RPC) is a protocol that a program can use to request a service from a program on another computer in a network, whose details it does not need to know. It is sometimes called a function call or subroutine call.

RPC is based on the client/server model. The requesting program is the client and the program providing the service is the server. Like a local or usual procedure call, a remote procedure call is a synchronous operation: the requesting program waits for the end of the processing of the remote procedure to resume. However, the use of threads or lightweight processes with a common address space allows the simultaneous execution of several remote procedure calls.

### RPC Message Procedure  
When program instructions that use an RPC framework are compiled into an executable program, a stub file is included in the compiled code to represent the code of the remote procedure. When the program runs and the procedure is called, the stub file receives the request and forwards it to a client runtime program on the local computer.

### Explanation of the RPC  
The client runtime program knows how to address the server application on the remote computer and sends a message over the network requesting the remote procedure. Similarly, the server includes a stub file and an execution program that communicate with the remote procedure itself. The request-response protocols follow the same method

![](https://imgs.developpaper.com/imgs/3373452411-a55f9829e92ecdb2_articlex.png)

### Using RPCCLIENT
Testing for Null or Authenticated Sessions:
To test for null sessions, you can use the following command. If it connects, then you’ll be able to issue rpc client commands for further enumeration.
```
rpcclient -U "" -N [ip]
```

Have valid credentials? Use them to connect:
```
rpcclient -U <user> 10.10.10.193
```
Once connected, there are various queries you can run.

To enumerate printers:
```
enumprinters
```

To enumerate users and groups:
```
enumdomusers
enumdomgroups
```

The above command will output user/group RIDs. You can pass those into further queries like:

```
querygroup <RID>
querygroupmem <RID>
queryuser <RID>
```

### SNMP


## Exercices 


⚠️⚠️⚠️ Please save your answers. Your coaches may ask you for a copy of all your answers at the end of the challenge. ⚠️⚠️⚠️

**Ip : 10.12.1.4X**
 
*With rpc protocol*

1. With the rpc protocol, how many users can you find ?
    > Your response : 35
    
    > Your command : rpcclient -U "" -N 10.12.1.40
    
    > rpclient $> enumdomusers
    
    
2. What is the rid of msfadmin?

    > Your response : [msfadmin] rid:[0xbb8]
    
    > Your command: enumdomusers 
    
3. What is the path of msfadmin's profile?


    > Your response : \\metasploitable\msfadmin\profile
    
    > Your command : queryuser msfadmin
    
    
4. When did msadmin last change password?

    > Your response : Wed, 28 Apr 2010 08:56:18 CEST
    
    > Your command : queryuser msfadmin
    
5. When should msfadmin change its password?

    > Your response : Thu, 14 Sep 30828 04:48:05 CEST
    
    > Your command :queryuser msfadmin


## SNMP 
SNMP stands for Simple Network Management Protocol which is used to exchange management information between network devices. SNMP allows an administrator to gather information about the host on which SNMP is running. It is also possible to modify this information.

Managed devices such as routers, hubs, switches, servers and desktops are typically configured with SNMP. An SNMP-configured device often includes an agent, which performs functions such as collecting information about the environment that can be used later by other utilities.

read this documentation :  https://www.pentestpartners.com/security-blog/snmp-simply-not-my-problem-or-is-it/


**Tools :**
- snmpwalk: snmpwalk -v 1 -c public 192.168.99.144
- snmpcheck: snmpcheck -t 192.168.99.144





